<div class="single-message-container" [class.fd-rr]="isOwnMessage()" [class.bg-blue]="messageEditable">

    <img class="avatar" src="assets/avatars/avatar_1.png" alt="">

    <div class="message-wrapper" [class.ai-fe]="isOwnMessage()">
        <div class="message-header" [class.fd-rr]="isOwnMessage()">
            <div class="author">
                <span class="name">{{message.writer}}</span>
                <span class="time">{{getTwoDigitNumber(message.time.hour)}}:{{ getTwoDigitNumber(message.time.minute)}}</span>
            </div>
            <div class="reaction" [class.own-reactions]="isOwnMessage()">
                @for (emoji of reactions; track $index) {
                    <span (click)="reactToMessage(emoji)">{{emoji}}</span>
                }
                <div class="reaction-emoji">
                    <img src="assets/icons/comment.png" alt="" (click)="answerToMessage()">
                </div>
                
                @if (isOwnMessage()){
                    <div class="reaction-emoji" (click)="editMessage()">
                        <img src="assets/icons/more_vert.png" alt="">
                    </div>
                }
            </div>
        </div>
        <div class="message" [class.own-message]="isOwnMessage()" [class.edit]="messageEditable">   
            @if(messageEditable){
                <textarea [(ngModel)]="textareaMessage" class="edit-textarea" name="" id=""></textarea>
                <div class="edit-btn-container">
                    <button class="white-button" (click)="closeEditMessage()">Abbrechen</button>
                    <button class="blue-button" (click)="saveEdits()">Speichern</button>
                </div>
            } @else {
                <span>{{message.message}}</span>
            }
            
        </div>
        <div class="answers">
            <div class="reactions-div">
                @for (emoji of message.emojis; track $index) {
                    <div class="reaction-item">
                        <span (click)="reactWithGivenReaction(emoji.unicode)">{{emoji.unicode}} {{emoji.count}}</span>
                    </div>
                }     
            </div> 
            @if (message.answer) {
                @if (message.answer.length>0) {
                    <span class="answer">{{message.answer.length}} Antworten</span>
                }
            }
            
            <span class="time">Letzte Antwort 14:56 Uhr</span>
        </div>
    </div>
</div>